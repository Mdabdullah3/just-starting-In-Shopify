{%- comment -%} 
  100 % server-side related products â€“ no AJAX, no JS.
  Uses the native Shopify recommendations object. 
{%- endcomment -%}

<div class="related-products-section page-width">
  <div class="section-header">
    <h2 class="title">{{ section.settings.heading }}</h2>
  </div>

  {%- if recommendations and recommendations.products_count > 0 -%}
    <div class="product-grid grid grid--{{ section.settings.limit }}-col-desktop">
      {%- for rec_product in recommendations.products limit: section.settings.limit -%}
        <div class="grid__item">
          {%- render 'card-product'
            , product: rec_product -%}
        </div>
      {%- endfor -%}
    </div>
  {%- endif -%}
</div>

{% schema %}
  {
    "name": "Recommended products",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "You may also like"
      }, {
        "type": "range",
        "id": "limit",
        "label": "Products to show",
        "min": 2,
        "max": 8,
        "step": 1,
        "default": 4
      }
    ],
    "presets": [
      {
        "name": "Related products (server-side)"
      }
    ]
  }
{% endschema %}